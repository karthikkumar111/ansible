#Step 1: Install Ansible on EC2 Linux 2023

#Update system packages
sudo dnf update -y

#Set vim as default editor 
#Make it permanent (recommended)
export EDITOR=vim
source ~/.bashrc

#Install Ansible
#Amazon Linux 2023 uses dnf and provides Ansible from the Amazon Linux Extras repos.
sudo dnf install ansible-core -y

# Create ansible user
sudo useradd ansible

# Set password (optional, but SSH key preferred)
sudo passwd ansible

# Allow passwordless sudo for ansible
echo "ansible ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible


#Verify:
ansible --version

#You should see something like:
#ansible [core 2.14.x] 

#Create Ansible config directory
sudo mkdir -p /etc/ansible
sudo touch /etc/ansible/ansible.cfg
sudo touch /etc/ansible/hosts

#Minimal ansible.cfg (default setup)
vim /etc/ansible/ansible.cfg

#paste this lines
[defaults]
inventory = /etc/ansible/hosts
remote_user = ec2-user
host_key_checking = False
retry_files_enabled = False

#Add Inventory (example with EC2)
vim /etc/ansible/hosts



[webservers]
ec2-xx-xx-xx-xx.compute-1.amazonaws.com ansible_user=ec2-user ansible_ssh_private_key_file=/path/to/key.pem

#Test Connection
ansible all -m ping

#If SSH is set up correctly, youâ€™ll get:

ec2-xx-xx-xx-xx.compute-1.amazonaws.com | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
